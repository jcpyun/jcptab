/* Written by jcpyun */
function displaytime(){var a=new Date,b=String(a.getHours()),c=String(a.getMinutes()),d=String(a.getSeconds());1==b.length&&(b=0+b),1==c.length&&(c=0+c),1==d.length&&(d=0+d);var e=b+":"+c+":"+d;document.getElementById("displaytime").innerHTML=e}function quotes(){symbols=["INDU:IND","SPX:IND","UKX:IND","NK1:IND","EURUSD:CUR","CL1:COM"],actual=["DJIA","S&P 500","FTSE 100","Nikkei 225 Future","EUR-USD","WTI-Crude"];for(var a="",b="",c=0;c<symbols.length;c++){xmlhttp.open("GET","https://www.bloomberg.com/markets/chart/data/1D/"+symbols[c],!1),xmlhttp.send();var d=JSON.parse(xmlhttp.responseText);if(0!=d.show_1D){if(datapoints=d.data_values,datapoints=d.data_values[datapoints.length-1][1],prevclose=d.prev_close,delta=datapoints-prevclose,delta=Math.round(1e4*delta)/1e4,percent=delta/prevclose*100,percent=Math.round(100*percent)/100,percent="(%"+String(percent)+")",delta>=0){var e="green";delta=String(delta),delta="+"+delta}if(delta<0)var e="red";a+="<font color='white'>"+actual[c]+": </font><font color="+e+">"+datapoints+"&nbsp&nbsp"+delta+"&nbsp"+percent+"</font>&nbsp &nbsp &nbsp",b+="<font color='white'>"+actual[c]+"</font>:<font color="+e+">"+datapoints+"&nbsp&nbsp"+delta+"&nbsp"+percent+"</font>&nbsp &nbsp &nbsp"}}document.getElementById("quotes").innerHTML=a}function redditFeeder(){var a="8a284b7114cc49efa3f55b969b850f9a";xmlhttp.open("GET","https://newsapi.org/v1/articles?source=reddit-r-all&sortBy=top&apiKey="+a,!1),xmlhttp.send();for(var b=JSON.parse(xmlhttp.responseText),c=[],f=(document.createElement("div"),document.createElement("br"),""),g=0;g<b.articles.length;g++)c.push(b.articles[g].title),urllink=b.articles[g].url,f+="<font color='white'>-<a href=\""+urllink+'">'+b.articles[g].title+"</a></font>";document.getElementById("reddit").innerHTML=f}function ModularNews(a,b){var c={cnn:"CNN","the-new-york-times":"The New York Times",bloomberg:"Bloomberg","bbc-news":"BBC","business-insider":"Business Insider","google-news":"Google News","the-economist":"The Economist","hacker-news":"Hacker News","national-geographic":"National Geographic",time:"Time",espn:"ESPN","the-wall-street-journal":"The Wall Street Journal",techcrunch:"TechCrunch"},d="8a284b7114cc49efa3f55b969b850f9a";xmlhttp.open("GET","https://newsapi.org/v1/articles?source="+a+"&sortBy="+b+"&apiKey="+d,!1),xmlhttp.send();for(var e=JSON.parse(xmlhttp.responseText),f=[],i=(document.createElement("div"),document.createElement("br"),""),j=0;j<e.articles.length;j++)f.push(e.articles[j].title),urllink=e.articles[j].url,i+="<div class='orfont'>-<a href=\""+urllink+'">'+e.articles[j].title+"</a><br></div>";return"<div class='compfont'>"+c[a]+"</div>"+i}function columnCreater(a,b){var c="";if(1==b){for(var c='<div class="row">',d=0;d<a.length;d++)c+='<div class="cols">'+ModularNews(a[d],"top")+"</div>";c+="</div>"}if(2==b){for(var c,d=0;d<a.length-1;d+=2)c+='<div class="row">',c+='<div class="cols">'+ModularNews(a[d],"top")+"</div>",c+='<div class="cols">'+ModularNews(a[d+1],"top")+"</div>",c+="</div>";c+="</div>"}if(420==b){for(var c,d=0;d<a.length-1;d+=2)c+='<div class="row">',c+='<div class="col-6">'+ModularNews(a[d],"top")+"</div>",c+='<div class="col-6">'+ModularNews(a[d+1],"top")+"</div>",c+="</div>";c+="</div>"}document.getElementById("modular").innerHTML=c}xmlhttp=new XMLHttpRequest,document.addEventListener("DOMContentLoaded",function(){displaytime(),quotes(),window.setInterval(displaytime,1e3),window.setInterval(quotes,1e3)}),chrome.storage.sync.get(null,function(a){var b=a.columnSetting,c=a.newsList;2!=b&&1!=b&&columnCreater(["bbc-news","bloomberg","business-insider","cnn","espn","google-news","hacker-news","national-geographic","techcrunch","the-economist","the-new-york-times","the-wall-street-journal","time"],420),1==b&&$(document).ready(function(){columnCreater(c,1);for(var a=document.getElementsByClassName("cols");a.length;)a[0].className="col-12"}),2==b&&$(document).ready(function(){columnCreater(c,2);for(var a=document.getElementsByClassName("cols");a.length;)a[0].className="col-6"})});