/* Written by jcpyun */
function displaytime(){var e=new Date,t=String(e.getHours()),n=String(e.getMinutes()),o=String(e.getSeconds());1==t.length&&(t=0+t),1==n.length&&(n=0+n),1==o.length&&(o=0+o);var r=t+":"+n+":"+o;document.getElementById("displaytime").innerHTML=r}function quotes(){symbols=["INDU:IND","SPX:IND","UKX:IND","NK1:IND","EURUSD:CUR","CL1:COM"],actual=["DJIA","SP&P 500","FTSE 100","Nikkei 225 Future","EUR-USD","WTI-Crude"];for(var e="",t="",n=0;n<symbols.length;n++){xmlhttp.open("GET","https://www.bloomberg.com/markets/chart/data/1D/"+symbols[n],!1),xmlhttp.send();var o=JSON.parse(xmlhttp.responseText);if(0!=o.show_1D){if(datapoints=o.data_values,datapoints=o.data_values[datapoints.length-1][1],prevclose=o.prev_close,delta=datapoints-prevclose,delta=Math.round(1e4*delta)/1e4,percent=delta/prevclose*100,percent=Math.round(100*percent)/100,percent="(%"+String(percent)+")",delta>=0){var r="green";delta=String(delta),delta="+"+delta}if(delta<0)var r="red";e+="<font color='white'>"+actual[n]+": </font><font color="+r+">"+datapoints+"&nbsp&nbsp"+delta+"&nbsp"+percent+"</font>&nbsp &nbsp &nbsp",t+="<font color='white'>"+actual[n]+"</font>:<font color="+r+">"+datapoints+"&nbsp&nbsp"+delta+"&nbsp"+percent+"</font>&nbsp &nbsp &nbsp"}}document.getElementById("quotes").innerHTML=e}function redditFeeder(){var e="8a284b7114cc49efa3f55b969b850f9a";xmlhttp.open("GET","https://newsapi.org/v1/articles?source=reddit-r-all&sortBy=top&apiKey="+e,!1),xmlhttp.send();for(var t=JSON.parse(xmlhttp.responseText),n=[],o=(document.createElement("div"),document.createElement("br"),""),r=0;r<t.articles.length;r++)n.push(t.articles[r].title),urllink=t.articles[r].url,o+="<font color='white'>-<a href=\""+urllink+'">'+t.articles[r].title+"</a></font>";document.getElementById("reddit").innerHTML=o}function ModularNews(e,t){var n={cnn:"CNN","the-new-york-times":"The New York Times",bloomberg:"Bloomberg","bbc-news":"BBC","business-insider":"Business Insider","google-news":"Google News","the-economist":"The Economist","hacker-news":"Hacker News","national-geographic":"National Geographic",time:"Time",espn:"ESPN","the-wall-street-journal":"The Wall Street Journal",techcrunch:"TechCrunch"},o="8a284b7114cc49efa3f55b969b850f9a";xmlhttp.open("GET","https://newsapi.org/v1/articles?source="+e+"&sortBy="+t+"&apiKey="+o,!1),xmlhttp.send();for(var r=JSON.parse(xmlhttp.responseText),s=[],l=(document.createElement("div"),document.createElement("br"),""),a=0;a<r.articles.length;a++)s.push(r.articles[a].title),urllink=r.articles[a].url,l+="<div class='orfont'>-<a href=\""+urllink+'">'+r.articles[a].title+"</a><br></div>";return"<div class='compfont'>"+n[e]+"</div>"+l}function columnCreater(e,t){var n="";if(1==t){for(var n='<div class="row">',o=0;o<e.length;o++)n+='<div class="cols">'+ModularNews(e[o],"top")+"</div>";n+="</div>"}if(2==t){for(var n,o=0;o<e.length-1;o+=2)n+='<div class="row">',n+='<div class="cols">'+ModularNews(e[o],"top")+"</div>",n+='<div class="cols">'+ModularNews(e[o+1],"top")+"</div>",n+="</div>";n+="</div>"}if(420==t){for(var n,o=0;o<e.length-1;o+=2)n+='<div class="row">',n+='<div class="col-6">'+ModularNews(e[o],"top")+"</div>",n+='<div class="col-6">'+ModularNews(e[o+1],"top")+"</div>",n+="</div>";n+="</div>"}document.getElementById("modular").innerHTML=n}xmlhttp=new XMLHttpRequest,document.addEventListener("DOMContentLoaded",function(){displaytime(),quotes(),window.setInterval(displaytime,1e3),window.setInterval(quotes,1e3)}),chrome.storage.sync.get(null,function(e){var t=e.columnSetting,n=e.newsList;2!=t&&1!=t&&columnCreater(["bloomberg","bbc-news","google-news","the-economist"],420),1==t&&$(document).ready(function(){columnCreater(n,1);for(var e=document.getElementsByClassName("cols");e.length;)e[0].className="col-12"}),2==t&&$(document).ready(function(){columnCreater(n,2);for(var e=document.getElementsByClassName("cols");e.length;)e[0].className="col-6"})});